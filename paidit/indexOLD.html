<!doctype html>
<html class="no-js" lang="en">
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paidit | Welcome</title>
    <link rel="shortcut icon" href="img/icon/checkMark.png"/>
    <link rel="stylesheet" href="css/test.css" />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  
  <body onload="changeWelcome()">
    <div class="icon-bar five-up">
      <a class="item" href="index.html" id = "home">
        <img src="img/icon/homeIconG.png" height="20" width="20"  >
        <label class="show-for-medium-up" id="hometext">Home</label>
      </a>
      <a class="item" href="analysis.html">
        <img src="img/icon/chartsIconG.png" height="20" width="20">
        <label class="show-for-medium-up">Bill Analysis</label>
      </a>
      <a class="item" href="billaccounts.html">
        <img src="img/icon/billIconG.png" height="20" width="20">
        <label class="show-for-medium-up">Bills</label>
      </a>
      <a class="item" href="notificationslog.html">
        <img src="img/icon/smsIconG.png" height="20" width="20">
        <label class="show-for-medium-up">Notification Log</label>
      </a>
      <a class="item" href="usersettings.html">
        <img src="img/icon/gearIconG.png" height="20" width="20">
        <label class="show-for-medium-up">Settings</label>
      </a>
    </div>

    <div class="container navigation" style = "width:80%; margin:0% 25% 0% 5%"> 
      <div class="large-8 columns" align = "center">
        <h1 style="font-size:300%" id = "welcome"><b>Welcome to <img src="img/paiditkyleblack.png" height="102" width="152">!</b></h1>
        <div class="panel">
          <p><b>Here is a list of all your upcoming bills:</b></p>
          <p><img src="img/listofbills.png" height="300" width="600"></p>
        </div> <!-- panel -->
      </div> 
      <div align = "right" class="large-4 columns">
         <ul class="button-group radius even-1 ">
        <h5><button onClick="logout()" id="logout">Logout</button></h5></ul>
        <h3><u> Useful Links </u></h3>
        <ul style="list-style-type:none">
          <li><a href="http://cfs.wisc.edu/">Center of Financial Security</a></li>
          <li><a href="http://bus.wisc.edu/knowledge-expertise/academic-departments/finance">Finance, Investment, and Banking</a></li>
          <li><a href="http://continuingstudies.wisc.edu/advising/finance.htm">Financial Services</a></li>
          <li><a href="http://www.bussvc.wisc.edu/acct/acct.html">Accounting Services</a></li>
          <li><a href="www.asm.wisc.edu/finance-committee.html">Finance Committee @ UW-Madison</a></li>
        </ul>
        <p><img src="img/calendarmock.png" height="202" width="202"></p>
        <p><img src="img/piechart.png" height="202" width="202"></p>
        <div class="row fullWidth" div id="topRow">
          <ul class="button-group radius even-1 " id="verificationButton">
            <li><a href="#" data-reveal-id="verModal" class="button clearRegForm">Enter Verification Code Here</a></li>
          </ul>
        </div>
      </div>
    </div>
    
    <hr />
    
    <!--  verification modal-->
    <div div id="verModal" class="reveal-modal tiny" data-reveal aria-labelledby="Verification" aria-hidden="true" role="dialog">
      <div class="row">
        <div class="large-6 large-centered columns">
          <a><img src="img/logoSm.png" /></a>
        </div>
      </div>
      <form id="verForm" data-abide name='verForm' onsubmit="return validateForm()" method="post">
      <div class="row">
        <div class="large-6 large-centered columns">
          <label></br>Enter 10-digit code below
            <input type="text" placeholder="12ab34cd56" id='verCode' name='verCode'/>
          </label>
        </div>
      </div>
      <div class="row">
        <div class="large-6 large-centered columns">
          <input href="#" type="submit" class="radius button" value="Submit Code"/>
        </div>
      </div>
      <a class="close-reveal-modal" aria-label="Close">&#215;</a>
      </form>
    </div>     <!--  verification modal-->
    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      
      function logout() {
        var obj = JSON.parse(getCookie("allUsers"));
        var test = getCookie("allUsers");
        var numUsers = obj.users.length;
        setCookie("currUser", "", 30);
        //alert("before" + test);
        //obj.users[index].userStatus = "signed out";
        //obj = JSON.stringify(obj);
        //setCookie("allUsers", obj, 30);
        //alert("after" + obj);
        window.location.replace("splash.html");
        return;
      }
      
      function setCookie(cname,cvalue,exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
      }

      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0)==' ') c = c.substring(1);
            if (c.indexOf(name) == 0) {
              return c.substring(name.length, c.length);
            }
          }
        return "";
      }
      
      function validateForm() {   
      var code = document.forms["verForm"]["verCode"].value;
        if (code == null || code == "") {
          alert("Verification Code must be filled out to submit");
          return false;
        } 
        else {
          if (code.length < 10 || code.length > 10){
            alert("Code must be of length 10!");
            return false;
          }
        }
      }
      
      var index;
      var obj;
      var name;
      var id;
      function changeWelcome(){
        var currUser = JSON.parse(getCookie("currUser"));
        name = currUser.firstName;
        if (name != "" && name != null){
          document.getElementById("welcome").innerHTML = name.bold() + "! ".bold() + document.getElementById("welcome").innerHTML;
          return;
        }
        name = currUser.userName;
        if (name != "" && name != null){
          document.getElementById("welcome").innerHTML = name.bold() + "! ".bold() + document.getElementById("welcome").innerHTML;
        }
        return;
      }
    </script>
  </body>
</html>